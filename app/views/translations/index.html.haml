.col-md-12
  .row
    .col-md-4
    .col-md-4
      %h1.text-center
        Translations
    .col-md-4.text-right
      = link_to simple_translation_engine.new_translation_path do
        Add Key
  .row
    %table.table.datatable
      %thead.thead-default
        %tr
          %th Key
          - @locales.each do |locale|
            %th= locale.name
          %th.text-center
          %th.text-center
      - @translation_keys.each do |translation_key|
        %tr
          %td= translation_key.name
          - @locales.each do |locale|
            %td
              - current_translation = @translations[locale.id][translation_key.name]
              - if current_translation and not current_translation[1].blank?
                = link_to current_translation[1].truncate(50), simple_translation_engine.edit_translation_path(current_translation[0])
              - else
                - path = (current_translation && current_translation[1].blank?) ? simple_translation_engine.edit_translation_path(current_translation[0]) : simple_translation_engine.new_translation_path(key: translation_key.name, key_locale: locale.name.to_s)
                = link_to "Add", path
          %td.text-center
            = link_to 'Auto Translate', simple_translation_engine.edit_translation_key_path(translation_key), {class: "btn btn-success btn-sm"}
          %td.text-center
            = link_to simple_translation_engine.translation_key_path(translation_key), {method: :delete, class: "btn btn-danger btn-sm", data: {confirm: "Are you sure?  This action cannot be undone!"}} do
              Delete
  .row
    -I18n.available_locales.each do |loc|
      =simple_form_for :upload_locale,
        url: simple_translation_engine.upload_locale_translations_path,
        html: {class: 'form-horizontal', multipart: true, method: :post },
        authenticity_token: true do |f|
        .col-sm-6.text-center
          .panel.panel-primary
            .panel-heading
              %h4="Load Locale #{loc.to_s.upcase} from File"
            .panel-body
              =f.input "file", required:true, label: false, :as => :file
              =f.input "locale", as: :hidden, input_html: {value: loc}
            .panel-footer
              =f.submit "Upload", class: "btn btn-primary"

:javascript

  $(document).ready(function() {

    $('.datatable').DataTable({
      "columnDefs": [ {
        "targets": [-1,-2],
        "orderable": false
      } ]
    });

  });